import { useDroppable } from "@dnd-kit/core";
import clsx from "clsx";
import { AnimatePresence, motion } from "framer-motion";

export const RecycleBox = ({ active }: { active: boolean }) => {
  const { setNodeRef, isOver } = useDroppable({
    id: "recycle-box",
  });

  return (
    <AnimatePresence>
      {active && (
        <motion.div
          initial={{
            opacity: 0,
            y: "100%",
          }}
          animate={{
            opacity: 1,
            y: 0,
          }}
          exit={{
            opacity: 0,
            y: "100%",
          }}
          className="fixed inset-x-0 bottom-4 z-10 flex justify-center"
        >
          <div
            ref={setNodeRef}
            className={clsx(
              "relative mx-auto cursor-pointer rounded-full p-4 shadow-lg backdrop-blur-md transition-all",
              isOver ? "bg-green-600" : "bg-green-600/40"
            )}
            style={{}}
          >
            <Svg
              className={clsx(
                "transition-opacity",
                isOver ? "opacity-100" : "opacity-50"
              )}
            />
          </div>
        </motion.div>
      )}
    </AnimatePresence>
  );
};

const Svg = ({ className }: { className?: string }) => {
  return (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      fill="none"
      height={100}
      width={100}
      viewBox="0 0 100 100"
      className={className}
    >
      <g clip-path="url(#a)">
        <path
          fill="#EEE"
          d="M49.999 44.375 26.457 20.833 54.165 3.542 79.79 20.833 50 44.375Z"
        />
        <path
          fill="#CCC"
          d="M49.999 44.375 26.457 20.833l8.958-11.041L79.79 20.833 50 44.375Z"
        />
        <path
          fill="#EFEFEF"
          d="M63.75 91.667h-27.5c-4.167 0-7.708-2.917-8.333-7.084L18.75 22.917h62.5l-9.375 61.666c-.625 4.167-4.167 7.084-8.125 7.084Z"
        />
        <path
          fill="#C4C4C4"
          d="M79.166 27.083H20.833a4.179 4.179 0 0 1-4.167-4.166 4.179 4.179 0 0 1 4.167-4.167h58.333a4.179 4.179 0 0 1 4.167 4.167 4.179 4.179 0 0 1-4.167 4.166Z"
        />
        <g clip-path="url(#b)">
          <path
            fill="#3E721D"
            d="M60.571 64.566a.879.879 0 0 1-.765-.444l-3.73-6.144c-.242-.422-.147-.95.275-1.192l4.366-2.642c.138-.079.437-.147.585-.147.307 0 .592.175.754.46l2.737 4.51.144 1.966c.242.422-.844 1.043-1.266 1.284l-2.665 2.233a.864.864 0 0 1-.435.116Z"
          />
          <path
            fill="#77B255"
            d="M54.404 67.209a.88.88 0 0 1-.88-.881v-5.285a.88.88 0 0 1 .88-.88h8.808c1.63 0 1.365-1.57 1.365-1.57s.288.496.33.574c.288.541.48 1.367.03 2.206l-2.72 5.393c-.128.254-.433.443-.767.443h-7.046Z"
          />
          <path
            fill="#77B255"
            d="M53.525 69.851a.88.88 0 0 1-.623-.258l-5.284-5.285a.881.881 0 0 1 0-1.245l5.284-5.285a.881.881 0 0 1 1.504.623v10.57a.88.88 0 0 1-.881.88Z"
          />
          <path
            fill="#3E721D"
            d="M52.285 41.93a.881.881 0 0 1-.048.884l-3.78 6.113c-.268.407-.781.563-1.188.296l-4.337-2.69a1.57 1.57 0 0 1-.396-.455.878.878 0 0 1 .066-.88l2.776-4.487 1.686-1.02c.267-.409 1.312.277 1.72.544l3.198 1.36a.879.879 0 0 1 .303.335Z"
          />
          <path
            fill="#77B255"
            d="M57.436 46.224a.88.88 0 0 1-.385 1.186l-4.71 2.4a.88.88 0 0 1-1.183-.386l-4-7.847c-.74-1.453-2.017-.505-2.017-.505s.31-.48.36-.555c.352-.502 1-1.046 1.953-1.028l6.04-.024c.286 0 .592.184.744.481l3.198 6.279Z"
          />
          <path
            fill="#77B255"
            d="M60.19 45.81a.88.88 0 0 1 .054.672l-2.309 7.108a.88.88 0 0 1-1.11.566l-7.107-2.31a.881.881 0 0 1-.129-1.622l9.417-4.798a.878.878 0 0 1 1.185.385Z"
          />
          <path
            fill="#3E721D"
            d="M37.118 60.64a.877.877 0 0 1 .777-.422l7.188.005c.487.015.888.37.876.856l-.012 5.104c-.005.158-.103.45-.18.576a.877.877 0 0 1-.784.406l-5.276-.007-1.755-.898c-.485-.015-.452-1.264-.44-1.749l-.522-3.438a.873.873 0 0 1 .128-.433Z"
          />
          <path
            fill="#77B255"
            d="M38.067 53.999a.88.88 0 0 1 1.21-.295l4.515 2.747a.88.88 0 0 1 .295 1.21l-4.577 7.525c-.845 1.391.632 1.981.632 1.981s-.573-.012-.662-.017c-.613-.034-1.417-.3-1.901-1.12l-3.194-5.126c-.15-.242-.153-.6.02-.886L38.067 54Z"
          />
          <path
            fill="#77B255"
            d="M36.264 51.874a.886.886 0 0 1 .545-.4l7.262-1.767a.88.88 0 0 1 1.064.647l1.767 7.26a.882.882 0 0 1-1.314.962l-9.028-5.492a.881.881 0 0 1-.296-1.21Z"
          />
        </g>
      </g>
    </svg>
  );
};
